<%- include("templates/header") %>

<div class="container">

<% if (foundRecipes.length === 0) { %>
  <h3>No results found.</h3>
<% } else if (foundRecipes.length === 200) { %>
  <h3>Maximum results exceeded. Displaying the top <%= foundRecipes.length %> results.</h3>
<% } else { %>
  <h3>Displaying <%= foundRecipes.length %> results.</h3>
<% } %>

</div>

<div class="container" style="margin-top: 10px;">
  <div class="row">
    <% let i = 0; %>
    <% foundRecipes.forEach((recipe, index) => { %>
      <% i++; %>
      <div class="col-md-4 mb-3">
        <div class="card">
          <% if (i === 1) { %>
            <div class="card-header">
              <h4>Hightest Rated Result</h4>
            </div>
          <% } else { %>
            <div class="card-header">
              <h4>Result #<%= i %></h4>
            </div>
          <% } %>
          <% if (recipe.Image_Link == 'Unavailable') { %>
            <img src="/images/logo.png" alt="<%= recipe.Name %>" class="card-img-top">
          <% } else { %>
            <img src="<%= recipe.Image_Link %>" alt="<%= recipe.Name %>" class="card-img-top">
          <% } %>
          <div class="card-body recipeResults">
            <h5 class="card-title"><%= recipe.Name %></h5>
              <form action="/generateMeasureUnits" method="POST">
                <div class="form-group">
                <button type="text" class="btn btn-primary" id="recipeID" name="recipeID" value="<%= recipe._id %>">View Recipe</button>
                </div>
              </form>
          </div>
        </div>
      </div>
      <% if ((index + 1) % 3 === 0) { %>
        </div>
        <div class="row">   
      <% } %>
    <% }); %>
  </div>
</div>

<%- include("templates/footer") %>